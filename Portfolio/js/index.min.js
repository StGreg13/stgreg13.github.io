"use strict";
var modalSuccess = document.querySelector(".modal-success"),
    close = modalSuccess.querySelector(".modal-close");
close.addEventListener("click", function (e) {
        modalSuccess
            .classList
            .remove("modal-show")
    }),
    window.addEventListener("keydown", function (e) {
        27 === e.keyCode && (
            e.preventDefault(),
            modalSuccess.classList.contains("modal-show") && modalSuccess.classList.remove("modal-show")
        )
    });
for (var i = 0; i < document.forms.length; i++)
    document
    .forms[i]
    .addEventListener("submit", function (e) {
        e.preventDefault(),
            sendForm(this)
    });

function serrialize(e) {
    for (var t = [], n = 0; n < e.elements.length; n++)
        isValidInput(e.elements[n]) && (
            t[n] = "".concat(e.elements[n].name, "=").concat(e.elements[n].value)
        );
    return t.join("&")
}

function clearForm(e) {
    for (var t = 0; t < e.elements.length; t++)
        isValidInput(e.elements[t]) && (e.elements[t].value = "")
}

function isValidInput(e) {
    return "BUTTON" !== e.tagName && "submit" !== e.type
}

function sendForm(e) {
    var t = new("onload" in new XMLHttpRequest ? XMLHttpRequest : XDomainRequest);
    t.open("POST", e.action, !0),
        t.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
        t.send(serrialize(e)),
        t.addEventListener("load", function () {
            clearForm(e),
                modalSuccess
                .classList
                .add("modal-show")
        })
}